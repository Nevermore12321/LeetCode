[toc]



# 栈+获取最小值





## 1. 题目描述



【题目】 实现一个特殊的栈，添加获取栈中最小值的功能

【要求】  Push、Pop、GetMin 的复杂度都为 O(1)



## 2. 思路



**设计思路：**

​	使用两个栈：

- **StackData** - 基本栈结构，保存数据

- **StackMin** - 栈顶保存当前 StackData 栈中的最小值



**压入规则：**

​	假设当前数据为 newNum，**先将其压入数据栈 StackData，然后判断 StackMin 栈中栈顶元素是否为空**：

- 如果 StackMin 栈顶的元素**为空**，表示栈中当前没有元素，将 newNum 压入 StackMin ，表示第一个元素就是最小元素

- 如果 StackMin 栈顶的元素**不为空，**比较 newNum 和 StackMin 栈顶元素的大小：

- - **如果 newNum 更小，或者相等**，将 newNum 压入 StackMin 栈顶，更新最小元素
  - 如果 StackMIn 栈顶元素更小，则 StackMIn 栈中不压入任何数据



![img](https://raw.githubusercontent.com/Nevermore12321/LeetCode/blog/%E5%B7%A6%E7%A8%8B%E4%BA%91%E7%AE%97%E6%B3%95200%E9%A2%98/clipboard.png)



**弹出规则：**

​	先在 StackData 栈中弹出数据，记为 value，**比较 value 与 StackMin 栈顶元素的大小**：

- 如果 value 与 StackMin 栈顶**元素相等**（value 不可能比 栈顶元素更小），StackMin 弹出栈顶元素，表示出栈的元素为当前的最小值
- 如果 value 比 StackMin 栈顶元素**大**，StackMin 不出栈，直接返回 value



## 3. golang 代码



```go	
package stackAndQueue

import (
	"fmt"
	"program-algorithm/lib"
)

/*
【题目】 实现一个特殊的栈，添加获取栈中最小值的功能
【要求】  Push Pop GetMin 的复杂度都为 O(1)

 */

type MinStack struct {
	stackData *lib.StackByLinkList
	stackMin *lib.StackByLinkList
}

func MakeMinStack() *MinStack {
	minStack := new(MinStack)
	minStack.stackMin = lib.MakeStackByLinkList()
	minStack.stackData = lib.MakeStackByLinkList()
	return minStack
}

func (ms *MinStack) Push(data interface{}) {
	ms.stackData.Push(data)

	if ms.stackMin.IsEmpty() {
		ms.stackMin.Push(data)
	} else if ms.stackMin.Peek().(int) >= data.(int) {
		ms.stackMin.Push(data)
	}
}

func (ms *MinStack) Pop() interface{} {
	if ms.stackData.IsEmpty() {
		fmt.Println("This stack is empty.")
		return nil
	}
	value, err := ms.stackData.Pop()
	if err != nil {
		fmt.Println(err.Error())
		return nil
	}
	top := ms.stackMin.Peek().(int)
	if value.(int) == top {
		_, err := ms.stackMin.Pop()
		if err != nil {
			fmt.Println(err.Error())
			return nil
		}
	}

	return value
}

func (ms *MinStack) GetMin() interface{} {
	if ms.stackMin.IsEmpty() {
		fmt.Println("This stack is empty.")
		return nil
	}

	return ms.stackMin.Peek()
}

func MinStackTest() {

	stack := MakeMinStack()
	stack.Push(3)
	stack.Push(4)
	stack.Push(5)
	stack.Push(1)
	stack.Push(2)
	stack.Push(1)

	fmt.Println(stack.GetMin())
	stack.Pop()
	fmt.Println(stack.GetMin())
	stack.Pop()
	fmt.Println(stack.GetMin())
	stack.Pop()
	fmt.Println(stack.GetMin())
}
```

